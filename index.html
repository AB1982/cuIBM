<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>cuIBM: cuIBM - A GPU-based Immersed Boundary Method code</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">cuIBM
   </div>
   <div id="projectbrief">A GPU-based Immersed Boundary Method code</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">cuIBM - A GPU-based Immersed Boundary Method code </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>cuIBM solves the 2D incompressible Navier-Stokes equations with an immersed-boundary method on a single CUDA-capable GPU device with the <a href="https://github.com/cusplibrary/cusplibrary">CUSP</a> library.</p>
<p>Currently, cuIBM runs only on Unix-based systems (no support on Windows) and was last tested on Ubuntu 16.04. </p><hr/>
<h2>Documentation</h2>
<p>User's documentation is available on the <a href="https://github.com/barbagroup/cuIBM/wiki">Wiki</a> pages of the cuIBM repository.</p>
<p>Doxygen API documentation is available <a href="http://barbagroup.github.io/cuIBM">here</a>. </p><hr/>
<h2>Installation</h2>
<h3>Dependencies (last tested)</h3>
<ul>
<li>GNU C++ Compiler(<code>g++-5.4</code>)</li>
<li>NVIDIA's CUDA Compiler (<code>nvcc-8.0</code>)</li>
<li><a href="https://github.com/cusplibrary/cusplibrary">CUSP</a> (<code>0.5.1</code>)</li>
<li><a href="https://www.boost.org">Boost</a> (<code>1.64.0</code>)</li>
</ul>
<h4>GNU C++ Compiler</h4>
<p>Install <code>g++</code> using the following command: </p><pre class="fragment">&gt; sudo apt-get install g++
</pre><p>Check the version of g++ installed: </p><pre class="fragment">&gt; g++ --version
</pre><p>Other development and version control tools can be installed by following the instructions under Step 1 in the <a href="https://help.ubuntu.com/community/CompilingEasyHowTo">CompilingEasyHowTo</a> page on the Ubuntu Community Help Wiki. Software developers will find it useful to install all of them.</p>
<h4>NVIDIA's CUDA Compiler</h4>
<p><a href="https://developer.nvidia.com/cuda-downloads">Download and install</a> the CUDA Toolkit.</p>
<p>Check the version of NVCC installed: </p><pre class="fragment">&gt; nvcc --version
</pre><h4>CUSP Library</h4>
<p>CUSP is a library that provides routines to perform sparse linear algebra computations on Graphics Processing Units. It is written using the CUDA programming language and runs code on compatible NVIDIA GPUs.</p>
<p>CUSP is currently hosted on <a href="https://github.com/cusplibrary/cusplibrary">GitHub</a>. cuIBM has been tested and works with version 0.5.1, available for download <a href="https://github.com/cusplibrary/cusplibrary/archive/v0.5.1.tar.gz">here</a>. </p><pre class="fragment">&gt; export CUSP_DIR=$HOME/software/cusp/0.5.1
&gt; mkdir -p $CUSP_DIR
&gt; wget https://github.com/cusplibrary/cusplibrary/archive/v0.5.1.tar.gz
&gt; tar -xvf v0.5.1.tar.gz -C $CUSP_DIR --strip-components=1
&gt; rm -f v0.5.1.tar.gz
</pre><h4>Boost library</h4>
<p>In cuIBM, we use the parser <a href="https://github.com/jbeder/yaml-cpp">YAML-CPP</a> (version <code>0.5.1</code> bundled in cuIBM) that requires header files from the Boost library. </p><pre class="fragment">&gt; export BOOST_DIR=$HOME/software/boost/1.64.0
&gt; mkdir -p $BOOST_DIR
&gt; wget https://dl.bintray.com/boostorg/release/1.64.0/source/boost_1_64_0.tar.gz
&gt; tar -xvf boost_1_64_0.tar.gz -C $BOOST_DIR --strip-components=1
&gt; rm -f boost_1_64_0.tar.gz
</pre><h3>Compiling cuIBM</h3>
<p>Clone cuIBM: </p><pre class="fragment">&gt; mkdir -p $HOME/software
&gt; cd $HOME/software
&gt; git clone https://github.com/barbagroup/cuIBM.git
</pre><p>To compile cuIBM, make sure you have set correctly the environment variables <code>CUSP_DIR</code> and <code>BOOST_DIR</code> to point to their respective folder: </p><pre class="fragment">&gt; export CUSP_DIR=$HOME/software/cusp/0.5.1
&gt; export BOOST_DIR=$HOME/software/boost/1.64.0
</pre><p>We also recommend setting the environment variable <code>CUIBM_DIR</code> to point to the location of the cuIBM folder. While the code can be compiled and run without setting this variable, some of the validation scripts provided make use of it. </p><pre class="fragment">&gt; export CUIBM_DIR=$HOME/software/cuIBM
</pre><p>To compile cuIBM, navigate to the cuIBM directory: </p><pre class="fragment">&gt; cd $HOME/software/cuIBM
</pre><p>or </p><pre class="fragment">&gt; cd $CUIBM_DIR
</pre><p>then, run make: </p><pre class="fragment">&gt; make
</pre><p>Note: the current Makefile compiles cuIBM with the flag <code>-arch=sm_35</code> (compute capability of 3.5). You should adapt the Makefile if your NVidia card has a different compute capability.</p>
<p>Run an example (2D flow around cylinder at Re=40) to check that cuIBM has been built correctly: </p><pre class="fragment">&gt; bin/cuibm -directory examples/cylinder/Re40
</pre><p>Finally, you can add cuIBM to your path: </p><pre class="fragment">&gt; export PATH="$HOME/software/cuIBM/bin:$PATH"
</pre><p>Users-documentation is available in the Wiki pages of the GitHub repository.</p>
<h3>Post-processing</h3>
<p>To post-process the numerical solution from cuIBM, we provide Python scripts (present in each case in the folder <code>examples</code>). They make use of the package <a href="https://github.com/mesnardo/snake"><code>snake</code></a> that is bundled in the <code>external</code> folder of cuIBM (version <code>0.3</code>).</p>
<p>To install <code>snake</code>: </p><pre class="fragment">&gt; cd $CUIBM_DIR/external/snake-0.3
&gt; python setup.py install
</pre><p><code>snake</code> requires Python (2.7 or 3.5), Matplotlib, Scipy, and Pandas. </p><hr/>
<h2>Example: Flow over impulsively started cylinder (Re=550)</h2>
<p>To run the example: </p><pre class="fragment">&gt; cd $CUIBM_DIR/examples/cylinder/Re550
&gt; cuibm
</pre><p>To plot the instantaneous drag coefficient and the vorticity field at saved time steps: </p><pre class="fragment">&gt; python scripts/plotDragCoefficient.py
&gt; python scripts/plotVorticity.py
</pre><p>Figures are saved in the folder <code>images</code> of the simulation directory.</p>
<p>We also provide a detailed description for several examples:</p><ul>
<li>Lid-driven cavity flow;</li>
<li>Flow around an impulsively started cylinder;</li>
<li>Flow generated by a flapping wing;</li>
</ul>
<p>with comparison to experimental and computational results from other studies. </p><hr/>
<h2>List of examples</h2>
<ul>
<li><code>lidDrivenCavityRe100</code>: lid-driven cavity flow at Reynolds number 100. (~5 seconds on a K40 GPU.)</li>
<li><code>lidDrivenCavityRe1000</code>: lid-driven cavity flow at Reynolds number 1000. (~81 seconds on a K40 GPU.)</li>
<li><code>lidDrivenCavityRe3200</code>: lid-driven cavity flow at Reynolds number 3200. (~5 minutes on a K40 GPU.)</li>
<li><code>lidDrivenCavityRe5000</code>: lid-driven cavity flow at Reynolds number 5000. (~11 minutes on a K40 GPU.)</li>
<li><code>cylinderRe40</code>: flow over a circular cylinder at Reynolds number 40. (~4 minutes on a K40 GPU.)</li>
<li><code>cylinderRe100</code>: flow over a circular cylinder at Reynolds number 100. The initial flow field has an asymmetric perturbation that triggers instability in the flow and vortex shedding is observed in the wake.</li>
<li><code>cylinderRe150</code>: flow over a circular cylinder at Reynolds number 150. The initial flow field has an asymmetric perturbation that triggers instability in the flow and vortex shedding is observed in the wake.</li>
<li><code>cylinderRe200</code>: flow over a circular cylinder at Reynolds number 150. The initial flow field has an asymmetric perturbation that triggers instability in the flow and vortex shedding is observed in the wake.</li>
<li><code>cylinderRe550</code>: initial flow over an impulsively started cylinder at Reynolds number 550. (~4 minutes on a K40 GPU.)</li>
<li><code>cylinderRe3000</code>: initial flow over an impulsively started cylinder at Reynolds number 3000. (~25 minutes on a K40 GPU.)</li>
<li><code>flappingRe75</code>: flow around a flapping foil at Reynolds number 75. (~10 hours on a K20 GPU.)</li>
<li><code>heavingRe500</code>: flow around heaving foil at Reynolds number 500.</li>
<li><code>oscillatingCylindersRe100</code>: flow across two oscillating cylinders at Reynolds number 100. (~25 minutes on a K20 GPU.)</li>
<li><code>snakeRe1000AoA30</code>: flow around the cross-section of a gliding snake forming a 30-degree angle of attack with the freestream at Reynolds number 1000. (~65 hours on a K20 GPU.)</li>
<li><code>snakeRe1000AoA35</code>: flow around the cross-section of a gliding snake forming a 35-degree angle of attack with the freestream at Reynolds number 1000. (~65 hours on a K20 GPU.)</li>
<li><code>snakeRe1000AoA30</code>: flow around the cross-section of a gliding snake forming a 30-degree angle of attack with the freestream at Reynolds number 2000. (~65 hours on a K20 GPU.)</li>
<li><code>snakeRe1000AoA35</code>: flow around the cross-section of a gliding snake forming a 35-degree angle of attack with the freestream at Reynolds number 2000. (~65 hours on a K20 GPU.)</li>
</ul>
<p>To run any of the examples listed above: </p><pre class="fragment">&gt; cd $CUIBM_DIR
&gt; make &lt;examplename&gt;
</pre><p>or change directory to the corresponding example's folder and </p><pre class="fragment">&gt; cuibm
</pre><p>The biggest cases (for the gliding snake) requires a GPU device with at least 4GB of memory.</p>
<p>To test an example on a smaller number of time steps, you can change the value of the parameters <code>nt</code> in the input file <code>simParams.yaml</code> of the example directory. (Note that the flow solution is saved every <code>nsave</code> time steps which value can be changed in the same input file.) </p><hr/>
<h2>Papers published using cuIBM</h2>
<ul>
<li>Layton, S. K., Krishnan, A., Barba, L. A. (2011). "cuIBM--a GPU-accelerated immersed boundary method," unpublished. Preprint on arXiv: <a href="https://arxiv.org/abs/1109.3524v1">https://arxiv.org/abs/1109.3524v1</a></li>
<li>Krishnan, A., Barba, L. A. (2013). "Validation of the cuIBM code for Navier-Stokes equations with immersed boundary methods," Figshare: <a href="https://doi.org/10.6084/m9.figshare.92789.v3">https://doi.org/10.6084/m9.figshare.92789.v3</a></li>
<li>Krishnan, A., Socha, J. J., Vlachos, P. V., Barba, L. A. (2014). "Lift and wakes of flying snakes," <em>Physics of Fluids</em>, <b>26</b>:031901, <a href="https://dx.doi.org/10.1063/1.4866444">10.1063/1.4866444</a>. Preprint on arXiv: <a href="https://arxiv.org/abs/1309.2969">https://arxiv.org/abs/1309.2969</a></li>
<li>Mesnard, O., Barba, L. A. (2017). "Reproducible and replicable computational fluid dynamics: it's harder than you think," <em>IEEE/AIP Computing in Science and Engineering</em>, in press. Preprint on arXiv: <a href="https://arxiv.org/abs/1605.04339">https://arxiv.org/abs/1605.04339</a> <hr/>
</li>
</ul>
<h2>Contact</h2>
<p>Please e-mail <a href="#" onclick="location.href='mai'+'lto:'+'k.a'+'nu'+'sh@'+'gm'+'ail'+'.c'+'om'; return false;">Anush Krishnan</a> or <a href="#" onclick="location.href='mai'+'lto:'+'mes'+'na'+'rdo'+'@g'+'wu.'+'ed'+'u'; return false;">Olivier Mesnard</a>, if you have any questions, suggestions or feedback.</p>
<p>To report bugs, please use the GitHub issue tracking system. We are also open to pull-requests. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jul 19 2017 12:27:44 for cuIBM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
